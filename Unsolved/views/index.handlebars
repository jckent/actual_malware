<div id="home">
    <div id="container">
        <div class="jumbotron jumbotron-fluid">
            <div class="container">
                <h1 class="display-4">Actual Malware's Mixology App</h1>
                <div class="row">
                    <nav class="navbar navbar-light">
                        <form class="form-inline" action="api/new/cocktail" method=POST>
                            <input class="form-control mr-md-6" type="search" placeholder="Search for A Drink"
                                aria-label="Search" id="drinkSearch">
                            <button class="btn btn-outline-light my-2 my-md6" type="submit"
                                id="drinkSearchBtn">Search</button>
                        </form>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row" id="drinks-container">
        {{#each drinks}}
        {{#unless this.drunk}}
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="drinks-box">
            <div class="box gallery">
                <div class="card">
                    <img class="img-responsive" id="new-drinks" src={{this.drink_image}}>
                    <a onClick="modalDisplay({{@index}})" href="#" class="overlay link"
                        id="trigger-modal{{@index}}"></a>
                    <div class="info">
                        <div class="foot">
                            <p class="drink-name">{{this.drink_name}}</p>
                            <i class="line"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="myModal{{@index}}" class="modal">
        <div class="modal-content">
            <div class="row" id="modal-body">
                <div class="col-5" id="search-drink">
                    <img id="selected-drink-image" src={{this.drink_image}}>
                </div>
                <div class="col-7" id="drink-scroll">
                    <!--Close Modal Button -->
                    <span id="closeit{{@index}}" class="close">&times;</span>
                    <div class="container" id="modal-drink-info-box">
                        <h2 class="drink-name" id="modal-drink-name">{{this.drink_name}}</h2>
                        <!--Ingredients-->
                        <div class="row">
                            <div class="col-6" id="ingredients">
                                <p><strong>Drink Ingredients: </strong>{{this.drink_ingredients}}</p>
                            </div>
                            <div class="col-6" id="instructions">
                                <p><strong>Preparation Ingredients: </strong>{{this.drink_instructions}}</p>
                            </div>
                        </div>
                        <!--Favorite Drinks Button -->
                        <div class="row">
                            <div class="col-md-3">
                                <form action="/api/new/watched/{{this.id}}?_method=PUT" method="POST">
                                    <input type="hidden" name="drunk" value="true">
                                    <button type="button" class="btn btn-light" id="favoriteDrinkBtn">Favorite</button>
                                </form>
                            </div>
                            <!--Remove Drinks Button-->
                            <div class="col-md-3">
                                <form action="/api/new/delete/{{this.id}}?_method=DELETE" method="POST">
                                    <input type="hidden" name="drunk" value="true">
                                    <button type="button" class="btn btn-light" id="deleteDrinkBtn">Delete</button>
                                </form>
                            </div>
                            <div class="col-md-6"></div>
                        </div>
                        <!--Video Demonstration-->
                        <iframe id="trailer-box" src="https://www.youtube.com/embed/{{this.drink_demonstration}}"
                            frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{/unless}}
    {{/each}}
</div>

<script>
    function modalDisplay(num) {
        console.log(num);
        // Get the modal
        var modal = document.getElementById("myModal" + num);
        // Get the button that opens the modal
        var btn = document.getElementById("trigger-modal" + num);
        modal.style.display = "block";
        //embedUt(num)
        // Get the <span> element that closes the modal
        var span = document.getElementById("closeit" + num);
        // When the user clicks the button, open the modal 
        //btn.onclick = function() {

        //}
        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
    }

    modalDisplay();
</script>